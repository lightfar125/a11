enable epel
https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm

# yum install https://download.postgresql.org/pub/repos/yum/9.6/redhat/rhel-7-x86_64/pgdg-centos96-9.6-3.noarch.rpm
# yum install postgresql96 postgresql96-server postgresql96-devel
# /usr/pgsql-9.6/bin/postgresql96-setup initdb
vi /var/lib/pgsql/9.6/data/pg_hba.conf
systemctl start postgresql-9.6 && systemctl enable postgresql-9.6
sudo -u postgres psql
CREATE DATABASE netbox;
CREATE USER netbox WITH PASSWORD 'passnetbox';
GRANT ALL PRIVILEGES ON DATABASE netbox TO netbox;
\q
psql -U netbox -W -h localhost netbox

yum install -y gcc libxml2-devel libxslt-devel libffi-devel graphviz openssl-devel redhat-rpm-config redis bzip2-devel sqlite-devel git

mkdir -p /opt/netbox && cd /opt/netbox
git clone -b master https://github.com/netbox-community/netbox.git .
pip3.6 install -r requirements.txt
cd netbox
./generate_secret_key.py
vMca%K#E3Af-nOjR8NJ)y5S=Qq76*xswPlDGI(T$mpu4WX&U0H
cd netbox
cp configuration.example.py configuration.py        
vi configuration.py
cd /opt/netbox/netbox
python3 manage.py migrate
python3 manage.py createsuperuser
python3 manage.py collectstatic --no-input


Python3.6
cd /usr/src
wget https://www.python.org/ftp/python/3.6.9/Python-3.6.9.tgz
tar xzf Python-3.6.9.tgz
cd Python-3.6.9
./configure --enable-optimizations
make altinstall
 ln -s /usr/local/bin/python3.6 /usr/bin/python3

daemon off;
worker_processes 1;

error_log /dev/stderr info;

events {
    worker_connections 1024;
}

http {
    include              /etc/nginx/mime.types;
    default_type         application/octet-stream;
    sendfile             on;
    tcp_nopush           on;
    keepalive_timeout    65;
    gzip                 on;
    server_tokens        off;
    client_max_body_size 10M;

    server {
        listen      8080;
        access_log  off;

        location /static/ {
            alias /opt/netbox/netbox/static/;
        }

        location / {
            proxy_pass http://netbox:8001;
            proxy_set_header X-Forwarded-Host $http_host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-Proto $scheme;
            add_header P3P 'CP="ALL DSP COR PSAa PSDa OUR NOR ONL UNI COM NAV"';
        }
    }
}

##reference
https://packetpushers.net/install-netbox-centos-7/
https://groups.google.com/forum/#!topic/netbox-discuss/M9L-zHJbUSs
https://github.com/ScanPlusGmbH/netbox-docker


